<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sign Up Form</title>
<style>
    .hidden {
        display: none;
    }
</style>
</head>
<body>

<form id="signupForm">
    <div>
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
    </div>
    <div>
        <label for="dob">Date of Birth:</label>
        <input type="date" id="dob" name="dob" required>
    </div>
    <div>
        <label for="age">Age:</label>
        <input type="range" id="age" name="age" min="18" max="100" required>
    </div>
    <div>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
    </div>
    <div id="websiteField" class="hidden">
        <label for="website">Website:</label>
        <input type="url" id="website" name="website">
    </div>
    <div>
        <button type="submit">Sign Up</button>
    </div>
</form>

<script>
    const form = document.getElementById('signupForm');
    const ageField = document.getElementById('age');
    const emailField = document.getElementById('email');
    const websiteField = document.getElementById('websiteField');

    function calculateAge(dob) {
        const today = new Date();
        const birthDate = new Date(dob);
        let age = today.getFullYear() - birthDate.getFullYear();
        const monthDiff = today.getMonth() - birthDate.getMonth();
        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }
        return age;
    }

    function toggleFields(age) {
        if (age < 18) {
            ageField.parentElement.classList.add('hidden');
            emailField.parentElement.classList.add('hidden');
            websiteField.classList.add('hidden');
        } else if (age >= 18 && age <= 25) {
            ageField.parentElement.classList.remove('hidden');
            emailField.parentElement.classList.remove('hidden');
            websiteField.classList.add('hidden');
        } else {
            ageField.parentElement.classList.remove('hidden');
            emailField.parentElement.classList.remove('hidden');
            websiteField.classList.remove('hidden');
        }
    }

    form.addEventListener('submit', function(event) {
        event.preventDefault();
        const name = document.getElementById('name').value;
        const dob = document.getElementById('dob').value;
        const age = calculateAge(dob);
        toggleFields(age);
        // You can add further validation logic here before submitting the form
        form.submit();
    });

    form.addEventListener('input', function(event) {
        const field = event.target;
        if (field.hasAttribute('required') && !field.value.trim()) {
            field.setCustomValidity('Please fill out this field');
        } else {
            field.setCustomValidity('');
        }
    });

    form.addEventListener('submit', function(event) {
    event.preventDefault();
    const name = document.getElementById('name').value;
    const dob = document.getElementById('dob').value;
    const age = calculateAge(dob);
    toggleFields(age);
    // Redirect to the next page with email as a URL parameter
    window.location.href = 'nextpage.html?email=' + encodeURIComponent(document.getElementById('email').value);
});

</script>

</body>
</html>
